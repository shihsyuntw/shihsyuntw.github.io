import{a as b,i as w,e as k,r as A,o as D,w as R,g as S,n as h,p as m,k as e,F,h as c,c as B,q as x,s as C,t as n,j as a}from"./index.06891447.js";import{D as g}from"./Chart.861d78f5.js";const N=c("div",{class:"d-flex align-items-center mb-2"},[c("i",{class:"bx bx-child"}),c("label",{class:"fs-3 fw-bold text-dark"},[c("strong",null,"\u8DA8\u52E2\u7E3D\u89BD")])],-1),O=c("hr",null,null,-1),P=c("h4",null,"Defect \u6A21\u578B\u53D6\u4EE3\u7387",-1),V=c("h4",null,"Repair \u6A21\u578B\u53D6\u4EE3\u7387",-1),j=c("h4",null,"Defect \u6A21\u578B\u6548\u5EA6",-1),L=c("h4",null,"Repair \u6A21\u578B\u6548\u5EA6",-1),J={__name:"PerformanceOverviewView",setup(W){const v=b(),d=w("appSettings"),p=(l,r)=>({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},valueFormatter:t=>`${t.toFixed(2)} %`},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:l},yAxis:[{type:"value",min:0,max:100,interval:20,axisLabel:{formatter:"{value}%"}}],series:[{data:r,type:"line"}]}),o=k(!1),s=A({labels:[],defectRates:[],repairRates:[],defectAccuracies:[],repairAccuracies:[]}),i=(l,r)=>l.map(t=>t[r]),y=async()=>{o.value=!0;try{const l=await B.get(v.api_get_weekly_summary,{params:{fab:d.value.fab,stage:d.value.stage}}),r=JSON.parse(l.data.data);s.labels=i(r,"Period").map(t=>t.replace("-"," / W")),s.defectRates=i(r,"skyeye_defect_replace_rate"),s.repairRates=i(r,"skyeye_repair_nonrepair_replace_rate"),s.defectAccuracies=i(r,"skyeye_defect_model_acc"),s.repairAccuracies=i(r,"skyeye_repair_nonrepair_model_acc")}catch(l){console.error("Failed to fetch weekly summary:",l)}finally{o.value=!1}};return D(()=>{d.value.fab&&y()}),R(()=>d.value.fab,l=>{l&&y()}),(l,r)=>{const t=x("el-col"),u=x("el-card"),_=x("el-row"),f=C("loading");return n(),S(F,null,[N,O,h((n(),m(_,{gutter:16},{default:e(()=>[a(t,{span:24},{default:e(()=>[a(u,{class:"mt-2"},{header:e(()=>[P]),default:e(()=>[a(t,{span:24},{default:e(()=>[a(g,{option:p(s.labels,s.defectRates),idx:"ctx1",style:{width:"100%",height:"350px"}},null,8,["option"])]),_:1})]),_:1})]),_:1})]),_:1})),[[f,o.value]]),h((n(),m(_,{gutter:16},{default:e(()=>[a(t,{span:24},{default:e(()=>[a(u,{class:"mt-4"},{header:e(()=>[V]),default:e(()=>[a(t,{span:24},{default:e(()=>[a(g,{option:p(s.labels,s.repairRates),idx:"ctx2",style:{width:"100%",height:"350px"}},null,8,["option"])]),_:1})]),_:1})]),_:1})]),_:1})),[[f,o.value]]),h((n(),m(_,{gutter:16},{default:e(()=>[a(t,{span:24},{default:e(()=>[a(u,{class:"mt-4"},{header:e(()=>[j]),default:e(()=>[a(t,{span:24},{default:e(()=>[a(g,{option:p(s.labels,s.defectAccuracies),idx:"ctx3",style:{width:"100%",height:"350px"}},null,8,["option"])]),_:1})]),_:1})]),_:1})]),_:1})),[[f,o.value]]),h((n(),m(_,{gutter:16},{default:e(()=>[a(t,{span:24},{default:e(()=>[a(u,{class:"mt-4"},{header:e(()=>[L]),default:e(()=>[a(t,{span:24},{default:e(()=>[a(g,{option:p(s.labels,s.repairAccuracies),idx:"ctx4",style:{width:"100%",height:"350px"}},null,8,["option"])]),_:1})]),_:1})]),_:1})]),_:1})),[[f,o.value]])],64)}}};export{J as default};
