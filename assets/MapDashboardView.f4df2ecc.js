import{_ as B,a as q,i as G,r as j,w as T,o as z,g as k,j as a,k as l,n as O,p as E,F as C,c as A,q as n,s as F,t as g,h as t,v as N,l as M,z as R,A as H,B as I}from"./index.bac4deaa.js";import{D as U}from"./Chart.0a715fc5.js";const W="/assets/eye-scanner.377eaa67.gif";const L={components:{DefaultCharts:U},setup(){const m=q(),y=G("appSettings"),x=j({loading:!1}),e=j({summaryCard:{status:"success",title:"Nothing Detected",num_detected:0,health_units:0,total_units:0},mapResult:[]}),D=()=>{y.value.fab!=""&&(x.loading=!0,A({method:"GET",params:{fab:y.value.fab,stage:y.value.stage},url:`${m.api_get_map_results}`}).then(function(s){let o=s.data.data;console.log(o),Object.keys(o).forEach(u=>{let r={name:u,overview_item:[],eqp_item:[],alarm_units:0};Object.keys(o[u]).forEach(c=>{let p={name:c,chamber_item:[]};Object.keys(o[u][c]).forEach(f=>{let v=0;o[u][c][f].forEach(h=>{p.chamber_item.push({chamber:f,template:h.template,alarm_count:h.alarm_count}),h.alarm_count&&(v+=h.alarm_count)}),r.overview_item.push({name:c+" / "+f,eqp:c,chamber:f,alarm_count:v}),v?r.alarm_units+=1:e.summaryCard.health_units+=1,e.summaryCard.total_units+=1}),r.eqp_item.push(p)}),r.overview_item.sort((c,p)=>p.alarm_count-c.alarm_count),e.mapResult.push(r)})}).catch(function(s){console.log(s)}).finally(function(){x.loading=!1,d()}))},S=s=>s<1?"success":s<5?"warning":"error",w=s=>s<1?"success":s<10?"warning":"danger",d=()=>{const s=e.mapResult.filter(o=>o.alarm_units>0).length;s==0?(e.summaryCard.status="success",e.summaryCard.title="Nothing Detected"):s>e.mapResult.length/2?(e.summaryCard.status="error",e.summaryCard.title="Multiple Group Detected"):(e.summaryCard.status="warning",e.summaryCard.title=`${s} Group Detected`)};return T(y,s=>{D()}),z(()=>{D()}),{state:x,summaryData:e,groupIconName:S,groupTagName:w}}},i=m=>(H("data-v-93ca711a"),m=m(),I(),m),J=i(()=>t("div",{class:"d-flex align-items-center justify-content-between mb-2"},[t("div",null,[t("i",{class:"bx bx-child"}),t("label",{class:"fs-3 fw-bold text-dark"},[t("strong",null,"Summary")])])],-1)),K=i(()=>t("hr",null,null,-1)),P={class:"statistic-card"},Q={class:"statistic-card"},X={style:{display:"inline-flex","align-items":"center"}},Y=i(()=>t("div",{class:"statistic-footer"},[t("div",{class:"footer-item"},[t("span",null,"\u5065\u5EB7\u55AE\u5143\u6578")])],-1)),Z={class:"statistic-card"},$={style:{display:"inline-flex","align-items":"center"}},tt=i(()=>t("div",{class:"statistic-footer"},[t("div",{class:"footer-item"},[t("span",null,"\u76E3\u63A7\u4E2D\u7684\u751F\u7522\u55AE\u5143\u6578\u91CF")])],-1)),et=i(()=>t("div",{class:"statistic-card text-center"},[t("img",{style:{width:"auto",height:"120px",opacity:"0.6"},src:W})],-1)),at=i(()=>t("br",null,null,-1)),st=i(()=>t("div",{class:"d-flex align-items-center justify-content-between mb-2"},[t("div",null,[t("i",{class:"bx bx-child"}),t("label",{class:"fs-3 fw-bold text-dark"},[t("strong",null,"Groups")])])],-1)),lt=i(()=>t("hr",null,null,-1));function nt(m,y,x,e,D,S){const w=n("el-result"),d=n("el-col"),s=n("Warning"),o=n("el-icon"),u=n("el-tooltip"),r=n("el-statistic"),c=n("el-row"),p=n("el-tag"),f=n("router-link"),v=n("el-scrollbar"),h=n("el-backtop"),V=F("loading");return g(),k(C,null,[J,K,a(c,{gutter:16},{default:l(()=>[a(d,{sm:12,md:6},{default:l(()=>[t("div",P,[a(w,{icon:e.summaryData.summaryCard.status,title:e.summaryData.summaryCard.title},null,8,["icon","title"])])]),_:1}),a(d,{sm:12,md:6},{default:l(()=>[t("div",Q,[a(r,{value:e.summaryData.summaryCard.health_units},{title:l(()=>[t("div",X,[N(" Healthy Units' Number "),a(u,{effect:"dark",content:"\u7FA4\u7D44\u5065\u5EB7\u5EA6",placement:"top"},{default:l(()=>[a(o,{style:{"margin-left":"4px"},size:12},{default:l(()=>[a(s)]),_:1})]),_:1})])]),_:1},8,["value"]),Y])]),_:1}),a(d,{sm:12,md:6},{default:l(()=>[t("div",Z,[a(r,{value:e.summaryData.summaryCard.total_units},{title:l(()=>[t("div",$,[N(" Units' Number "),a(u,{effect:"dark",content:"Someinfo..",placement:"top"},{default:l(()=>[a(o,{style:{"margin-left":"4px"},size:12},{default:l(()=>[a(s)]),_:1})]),_:1})])]),_:1},8,["value"]),tt])]),_:1}),a(d,{sm:12,md:6},{default:l(()=>[et]),_:1})]),_:1}),at,st,lt,O((g(),E(c,{gutter:16,class:"card-grid"},{default:l(()=>[(g(!0),k(C,null,M(e.summaryData.mapResult,b=>(g(),k("div",{class:"statistic-card",key:b.name},[a(w,{icon:e.groupIconName(b.alarm_units),title:b.name,class:"card-details"},{extra:l(()=>[a(v,{height:"200px"},{default:l(()=>[(g(!0),k(C,null,M(b.overview_item,_=>(g(),E(f,{style:{"margin-left":"20px"},to:{name:"MapDetailView",query:{eqp:_.eqp,chamber:_.chamber,hit:_.alarm_count,group:b.name}},key:_.name},{default:l(()=>[a(p,{type:e.groupTagName(_.alarm_count),class:"mt-1 mx-1",effect:"dark"},{default:l(()=>[N(R(_.name)+" / Hit "+R(_.alarm_count),1)]),_:2},1032,["type"])]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1032,["icon","title"])]))),128))]),_:1})),[[V,e.state.loading]]),a(h,{right:40,bottom:40,class:"bg-primary text-white"})],64)}const rt=B(L,[["render",nt],["__scopeId","data-v-93ca711a"]]);export{rt as default};
